var gAjax=function(b,a){a=void 0===a?{tokenName:null,accessToken:null}:a;this.name="G-Ajax";this.version="1.0.2";this.baseURL=(void 0===b?"./":b).replace(/\/{1,}$/,"");this.tokenName=a.tokenName;this.accessToken=a.accessToken};gAjax.prototype.gajaxVersion=function(){return JSON.stringify({name:this.name,version:this.version})};
gAjax.prototype.prepareRequest=function(b){b=void 0===b?null:b;var a=this.baseURL;null!==b&&(/^\/{1,}/.test(b)&&(b=b.replace(/^\/{1,}/,"")),a+="/"+b);return a.replace(/\/{1,}$/,"")};gAjax.prototype.encodeParams=function(b){var a=[],c;for(c in b){var d=b[c];d=encodeURIComponent(c)+"="+encodeURIComponent(d);a.push(d)}return a.join("&").replace(/%20/g,"+")};
gAjax.prototype.request=function(b,a,c){c=void 0===c?{}:c;var d=void 0===c.data?"":c.data,e=void 0===c.xhr?new XMLHttpRequest:c.xhr;c=this.prepareRequest(void 0===c.uri?"":c.uri);e.onreadystatechange=function(){4==this.readyState&&b(this.status,this.responseText)};""!==d&&(d=this.encodeParams(d));e.open(a,c,!1);/post/i.test(a)&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");void 0!==this.tokenName&&e.setRequestHeader(this.tokenName,this.accessToken);e.send(d);e.abort()};
gAjax.prototype.get=function(b,a){a=void 0===a?{}:a;this.request(b,"get",a)};gAjax.prototype.post=function(b,a){a=void 0===a?{}:a;this.request(b,"post",a)};
