var gAjax=function(a,b){b=void 0===b?{tokenName:null,accessToken:null}:b;this.name="G-Ajax";this.version="1.0.2";this.baseURL=(void 0===a?"./":a).replace(/\/{1,}$/,"");this.tokenName=b.tokenName;this.accessToken=b.accessToken};gAjax.prototype.gajaxVersion=function(){return JSON.stringify({name:this.name,version:this.version})};
gAjax.prototype.prepareRequest=function(a){a=void 0===a?null:a;var b=this.baseURL;null!==a&&(/^\/{1,}/.test(a)&&(a=a.replace(/^\/{1,}/,"")),b+="/"+a);return b.replace(/\/{1,}$/,"")};gAjax.prototype.encodeParams=function(a){var b=[],c;for(c in a){var d=a[c];d=encodeURIComponent(c)+"="+encodeURIComponent(d);b.push(d)}return b.join("&").replace(/%20/g,"+")};
gAjax.prototype.request=function(a,b,c){var d=void 0===c.data?"":c.data,e=void 0===c.xhr?new XMLHttpRequest:c.xhr;c=this.prepareRequest(void 0===c.uri?"":c.uri);e.onreadystatechange=function(){4==this.readyState&&a(this.status,this.responseText)};""!==d&&(d=this.encodeParams(d));e.open(b,c,!1);/post/i.test(b)&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");void 0!==this.tokenName&&e.setRequestHeader(this.tokenName,this.accessToken);e.send(d);e.abort()};
gAjax.prototype.get=function(a,b){this.request(a,"get",b)};gAjax.prototype.post=function(a,b){this.request(a,"post",b)};
